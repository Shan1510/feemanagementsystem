<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form method="post" >
<label for="class_name">Class:</label>
            <select name="class" id="class_name" required>
                <option value="">Select Class</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="7">7</option>
            </select>
            <br><br>

            <label for="section">Section:</label>
            <select name="sec" id="section" required>
                <option value="">Select Section</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
            </select>
            <br><br>

             <input type="submit" value="submit">
</form>
<table>
 <thead>
    <th>ID</th>
    <th>DAS</th>
    <th>Student name</th>
    <th>Father Name</th>
    <th>Contact number</th>
    <th>Class</th>
    <th>Sec</th>
    <th>Fee Amount</th>
    <th> Fee Status </th>
 </thead>


 <tbody id="studentTableBody">
   
 </tbody>


</table>
<script>
document.querySelector("form").addEventListener("submit", function(e){
    e.preventDefault(); 

    let tbody = document.getElementById("studentTableBody");
    tbody.innerHTML = ""; 

    fetch("../BACKEND/class1.php", {
        method: "POST",
        body: new FormData(this) // 'this' is the form
    })
    .then(res => res.json())
    .then(data => {
        console.log(data);
        if (data.error) {
            tbody.innerHTML = `<tr><td colspan="7">${data.error}</td></tr>`;
            return;
        }

        data.forEach(student => {
            tbody.innerHTML += `
                <tr>
                    <td>${student.id}</td>
                    <td>${student.DAS}</td>
                    <td>${student.student_name}</td>
                    <td>${student.father_name}</td>
                    <td>${student.contact_number}</td>
                    <td>${student.class_name}</td>
                    <td>${student.Class_sec}</td>
                    <td> fee amount  </td>
                    <td> <label for="paid>Paid</label> <input type="radio" id = "paid" ></td> 
                    <td> <a href="../BACKEND/promote.php"> promote </a> </td>
                    </tr>
                    `;
                 
        });
    })
    .catch(err => console.error(err)); // catch inside fetch
});
</script>


</body>
</html>


